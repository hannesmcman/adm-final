---
title: "Investigating U.S. Politicians' Twitter Habits"
knit: (function(input_file, encoding) {
  out_dir <- 'docs';
  rmarkdown::render(input_file,
 encoding=encoding,
 output_file=file.path(dirname(input_file), out_dir, 'index.html'))})
author: "Johannes Carlsen, Ben Westermeyer"
date: "5/20/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message = FALSE, warning = FALSE)
source("scripts/helpers.R")
```

# Introduction

# Research Questions

1. What patterns emerge when politicians' tweets are clustered based on the style of their tweets?
2. How partisan is the language of politicians' twitter accounts?
3. Is a politician's twitter activity related to his or her political activity?
4. What happens when we apply bot-detection models to politicians' tweets?

### What patterns emerge when politicians' tweets are clustered based on the style of their tweets?

Thanks to the `rtweet` package and a dataset found at (https://github.com/unitedstates/congress-legislators), we can easily access and import all the tweets and associated twitter metadata of the currrent members of the U.S. Congress. Before diving into our classification-based research questions, it seems appropriate to search for any patterns that may exist within this twitter behaviors of these politicians. We will explore and reveal these patterns using k-means clustering and Principal Components Analysis.

With all the data provided to us by Twitter's API, we have a lot of potential variables available to us to cluster on. We will use k-means clustering and PCA on three different feature sets to help illuminate the patterns that emerge from these politicians' use of twitter. These feature sets are as follows:

1. General twitter account information (Number of tweets, number of favorites, number of followers, etc.)
2. Stylistic and lingustic features generated from the raw text of each politician's actual tweets, using the `textfeatures` package. 
3. A larger set of stylistic and linguistic features generated by `textfeatures`, including word dimension estimates from the `word2vec` model. 
  
#### Clustering on User Account Information

```{r cluster-politicians-metadata}
pol_accounts.df <- read.csv("data/legislators-current.csv")

pol_account_data <- lookup_users(as.character(pol_accounts.df$twitter))

pol_account_data_numeric <- select_if(pol_account_data, is.numeric)
pol_account_data_numeric$id <- pol_account_data$user_id
pol_account_data_numeric$name <- pol_account_data$name
pol_account_data_numeric$screen_name <- pol_account_data$screen_name

pol_account_data_numeric <- filter_na_columns(pol_account_data_numeric, 445)
pol_account_data_numeric <- na.omit(pol_account_data_numeric)
pol_account_data_numeric <- pol_account_data_numeric %>%
  filter(!(screen_name %in% c("SenSanders", "SenWarren")))
pol_account_data_numeric.preds <- dplyr::select(pol_account_data_numeric, -c(id, name, screen_name))
plot_twiss_and_silhouette(pol_account_data_numeric.preds, 10)
showCluster(2, pol_account_data_numeric.preds, pol_account_data_numeric$name, 30)
showCluster(3, pol_account_data_numeric.preds, pol_account_data_numeric$name, 30)
mod.pca <- prcomp(pol_account_data_numeric.preds)
fviz_pca_var(mod.pca)
```

### How partisan is the language of politicians' twitter accounts?

### Is a politician's twitter activity related to his or her political activity?

### What happens when we apply bot-detection models to politicians' tweets?

# Conclusion


